MCP (بروتوكول سياق النموذج) هو معيار مفتوح يتيح لوكلاء الذكاء الاصطناعي الوصول إلى الأدوات الخارجية وواجهات برمجة التطبيقات ومصادر البيانات من خلال واجهة موحدة. يوحد اكتشاف الأدوات والوصول إليها، مشابه لـ OpenAPI لخدمات REST. يحسن MCP قابلية التركيب والمرونة لأنظمة الذكاء الاصطناعي من خلال تبسيط التحديثات أو الاستبدالات لأدوات الذكاء الاصطناعي مع تطور احتياجات عملك.

# الفوائد الرئيسية

- **قابلية التشغيل البيني** – ربط وكلاء الذكاء الاصطناعي بأدوات أي مورد ممكنة لـ MCP مع الحد الأدنى من الكود المخصص.
- **خطاطيف الأمان** – تكامل تسجيل الدخول والأذونات وتسجيل النشاط.
- **إعادة الاستخدام** – البناء مرة واحدة، وإعادة الاستخدام عبر المشاريع والسحب وأوقات التشغيل.
- **البساطة التشغيلية** – عقد واحد يقلل من الكود النمطي والصيانة.

# البنية

```
┌─────────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Azure AI Agent    │    │   MCP Client    │    │   MCP Server    │
│   (main.py)         │◄──►│ (mcp_client.py) │◄──►│ (mcp_server_sales_analysis.py) │
│                     │    └─────────────────┘    └─────────────────┘
│ ┌─────────────────┐ │                                   │
│ │ Azure AI        │ │                                   ▼
│ │ Agents Service  │ │                           ┌─────────────────┐
│ │ + Streaming     │ │                           │ Azure Database  │
│ │                 │ │                           │ for PostgreSQL  │
│ └─────────────────┘ │                           │       +         │
└─────────────────────┘                           │    pgvector     │
         │                                        └─────────────────┘
         ▼                                                │
┌─────────────────────┐                           ┌─────────────────┐
│ Azure OpenAI        │                           │ 8 Normalized    │
│ Model Deployment    │                           │ Tables with     │
│ (GPT-4, etc.)       │                           │ Performance     │
└─────────────────────┘                           │ Indexes         │
                                                  └─────────────────┘
```

# كيف يعمل

يستخدم MCP نموذج العميل-الخادم لتفاعلات وكيل الذكاء الاصطناعي مع الموارد الخارجية:

- **مضيف MCP:** وقت التشغيل أو المنصة التي تشغل وكيل الذكاء الاصطناعي (مثل خدمة Azure AI Foundry Agent Service).
- **عميل MCP:** SDK يحول استدعاءات أدوات وكيل الذكاء الاصطناعي إلى طلبات MCP.
- **خادم MCP:** يسجل الأدوات وينفذ الطلبات ويعيد نتائج JSON. يدعم المصادقة والتخويل والتسجيل.

### مكونات خادم MCP

- **الموارد:** مصادر البيانات مثل قواعد البيانات وواجهات برمجة التطبيقات ومخازن الملفات.
- **الأدوات:** دوال أو واجهات برمجة تطبيقات مسجلة تُنفذ عند الطلب.
- **الاستدعاءات (اختياري):** قوالب مُصنفة للإعادة الاستخدام.
- **السياسات (اختياري):** حدود وفحوصات أمان (معدل، عمق، مصادقة).

### نقل MCP

- **HTTP/HTTPS:** بروتوكولات ويب قياسية مع دعم التدفق.
- **stdio:** نقل محلي أو حاوي خفيف الوزن يشارك وقت التشغيل.

تستخدم هذه الورشة stdio للتواصل المحلي مع MCP. تستخدم عمليات النشر الإنتاجية HTTPS لقابلية التوسع والأمان.

# حالة الاستخدام

في هذه الورشة، يربط خادم MCP وكيل Azure AI ببيانات مبيعات Zava. عندما تسأل عن المنتجات أو المبيعات أو المخزون:

1. يولد وكيل الذكاء الاصطناعي طلبات خادم MCP.
2. خادم MCP:
    - يوفر معلومات المخطط للاستعلامات الدقيقة.
    - يشغل استعلامات SQL ويعيد بيانات منظمة.
    - يقدم خدمات الوقت للتقارير الحساسة للوقت.

يمكن هذا الحصول على رؤى فورية في عمليات مبيعات Zava بكفاءة.

*Translated using GitHub Copilot and GPT-4o.*
