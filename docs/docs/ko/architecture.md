## 핵심 기술 개요

- **Azure AI Foundry 에이전트 서비스**
  LLM 기반 에이전트를 호스팅하고, 도구(MCP 서버 포함)를 조율하며, 컨텍스트, 코드 인터프리터, 토큰 스트리밍을 관리하고, 인증, 로깅, 확장을 제공합니다.
- **MCP 서버**
  MCP(모델 컨텍스트 프로토콜)는 LLM에게 외부 도구, API, 데이터에 대한 통일된 인터페이스를 제공하는 개방형 표준입니다. 도구 발견을 표준화하고(REST용 OpenAPI와 유사) 도구를 쉽게 업데이트하거나 교체할 수 있게 하여 조합성을 향상시킵니다.
- **PostgreSQL + pgvector**
  관계형 데이터와 임베딩을 저장하고, 관계형(SQL) 및 의미적(벡터) 쿼리(pgvector를 통해)를 모두 지원하며, SQL과 RLS로 관리됩니다.

**종합하면:** 에이전트 서비스가 사용자 의도를 라우팅하고, MCP 서버가 이를 도구/SQL 호출로 변환하며, PostgreSQL+pgvector가 의미적 및 분석적 질문에 답변합니다.

## 아키텍처 (개요)

```plaintext
┌─────────────────────┐                         ┌─────────────────┐
│   Zava 에이전트 앱   │       stdio/https       │   MCP 서버      │
│   (app.py)          │◄───────────────────────►│ (sales_analysis)│
│                     │      MCP 전송           └─────────────────┘
│ ┌─────────────────┐ │                                 │
│ │ Azure AI        │ │                                 ▼
│ │ 에이전트 서비스  │ │                         ┌─────────────────┐
│ │ + 스트리밍      │ │                         │ Azure Database  │
│ │                 │ │                         │ for PostgreSQL  │
│ └─────────────────┘ │                         │   + pgvector    │
└─────────────────────┘                         └─────────────────┘
         │                                              |
         ▼                                              ▼
┌─────────────────────┐                         ┌─────────────────┐
│ Azure OpenAI        │                         │ Zava 판매       │
│ 모델 배포           │                         │ 데이터베이스     │
│ - gpt-4o-mini       │                         │ + 의미 검색     │
│ - text-embedding-3- │                         └─────────────────┘
│   small             │
└─────────────────────┘
```

## MCP 서버의 주요 이점

- **상호 운용성** – 최소한의 맞춤형 코드로 AI 에이전트를 모든 공급업체의 MCP 지원 도구에 연결
- **보안 훅** – 로그인, 권한, 활동 로깅 통합
- **재사용성** – 한 번 구축하여 프로젝트, 클라우드, 런타임 전반에서 재사용
- **운영 단순성** – 단일 계약으로 보일러플레이트와 유지보수 감소

## 입증된 모범 사례

- **비동기 API:** 에이전트 서비스와 PostgreSQL은 비동기 API를 사용하며, FastAPI/ASP.NET/Streamlit에 이상적입니다.
- **토큰 스트리밍:** UI에서 인지되는 지연 시간을 개선합니다.
- **관찰 가능성:** 모니터링과 최적화를 지원하는 내장 추적 및 메트릭.
- **데이터베이스 보안:** PostgreSQL은 제한된 에이전트 권한과 행 수준 보안(RLS)으로 보안되어, 에이전트가 인가된 데이터에만 액세스하도록 제한합니다.
- **코드 인터프리터:** [Azure AI 에이전트 서비스 코드 인터프리터](https://learn.microsoft.com/azure/ai-services/agents/how-to/tools/code-interpreter?view=azure-python-preview&tabs=python&pivots=overview){:target="_blank"}는 **샌드박스** 환경에서 LLM이 생성한 코드를 주문형으로 실행하여 에이전트 범위를 벗어난 작업을 방지합니다.

## 확장성

워크샵 패턴은 Foundry에서 데이터베이스 + 에이전트 지침을 업데이트하여 다른 용도(예: 고객 지원)로 적응시킬 수 있습니다.

*GitHub Copilot을 사용하여 번역되었습니다.*
