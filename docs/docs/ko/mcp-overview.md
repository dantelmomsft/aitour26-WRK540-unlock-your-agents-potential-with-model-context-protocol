MCP (Model Context Protocol)는 AI 에이전트가 통합된 인터페이스를 통해 외부 도구, API, 데이터 소스에 액세스할 수 있게 하는 오픈 표준입니다. REST 서비스의 OpenAPI와 유사하게 도구 검색 및 액세스를 표준화합니다. MCP는 비즈니스 요구사항이 발전함에 따라 AI 도구의 업데이트나 교체를 단순화하여 AI 시스템의 구성 가능성과 민첩성을 향상시킵니다.

# 주요 장점

- **상호 운용성** – 최소한의 사용자 정의 코드로 AI 에이전트를 모든 벤더의 MCP 지원 도구에 연결합니다.
- **보안 후크** – 로그인, 권한, 활동 로깅을 통합합니다.
- **재사용성** – 한 번 구축하면 프로젝트, 클라우드, 런타임에서 재사용합니다.
- **운영 단순성** – 단일 계약으로 보일러플레이트와 유지보수를 줄입니다.

# 아키텍처

```
┌─────────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Azure AI Agent    │    │   MCP Client    │    │   MCP Server    │
│   (main.py)         │◄──►│ (mcp_client.py) │◄──►│ (mcp_server_sales_analysis.py) │
│                     │    └─────────────────┘    └─────────────────┘
│ ┌─────────────────┐ │                                   │
│ │ Azure AI        │ │                                   ▼
│ │ Agents Service  │ │                           ┌─────────────────┐
│ │ + Streaming     │ │                           │ Azure Database  │
│ │                 │ │                           │ for PostgreSQL  │
│ └─────────────────┘ │                           │       +         │
└─────────────────────┘                           │    pgvector     │
         │                                        └─────────────────┘
         ▼                                                │
┌─────────────────────┐                           ┌─────────────────┐
│ Azure OpenAI        │                           │ 8 Normalized    │
│ Model Deployment    │                           │ Tables with     │
│ (GPT-4, etc.)       │                           │ Performance     │
└─────────────────────┘                           │ Indexes         │
                                                  └─────────────────┘
```

# 작동 방식

MCP는 외부 리소스와의 AI 에이전트 상호작용을 위해 클라이언트-서버 모델을 사용합니다:

- **MCP 호스트:** AI 에이전트를 실행하는 런타임 또는 플랫폼 (예: Azure AI Foundry 에이전트 서비스).
- **MCP 클라이언트:** AI 에이전트 도구 호출을 MCP 요청으로 변환하는 SDK.
- **MCP 서버:** 도구를 등록하고, 요청을 실행하고, JSON 결과를 반환합니다. 인증, 권한 부여, 로깅을 지원합니다.

### MCP 서버의 구성 요소

- **리소스:** 데이터베이스, API, 파일 저장소와 같은 데이터 소스.
- **도구:** 요청 시 실행되는 등록된 함수 또는 API.
- **프롬프트 (선택사항):** 재사용을 위한 버전 관리된 템플릿.
- **정책 (선택사항):** 제한 및 안전 검사 (비율, 깊이, 인증).

### MCP 전송

- **HTTP/HTTPS:** 스트리밍 지원이 있는 표준 웹 프로토콜.
- **stdio:** 런타임을 공유하는 경량 로컬 또는 컨테이너화된 전송.

이 워크샵은 로컬 MCP 통신을 위해 stdio를 사용합니다. 프로덕션 배포는 확장성과 보안을 위해 HTTPS를 사용합니다.

# 사용 사례

이 워크샵에서 MCP 서버는 Azure AI 에이전트를 Zava의 판매 데이터에 연결합니다. 제품, 판매 또는 재고에 대해 질문하면:

1. AI 에이전트가 MCP 서버 요청을 생성합니다.
2. MCP 서버가:
    - 정확한 쿼리를 위한 스키마 정보를 제공합니다.
    - SQL 쿼리를 실행하고 구조화된 데이터를 반환합니다.
    - 시간에 민감한 보고서를 위한 시간 서비스를 제공합니다.

이를 통해 Zava의 판매 운영에 대한 실시간 인사이트를 효율적으로 얻을 수 있습니다.

*Translated using GitHub Copilot.*
